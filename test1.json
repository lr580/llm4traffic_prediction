{
  "id": "502de296-3f38-4ca9-b615-70cb1c73d05b",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "在LLM（大语言模型）API调用中，`system`和`user`是两种不同的角色（role），用于区分对话中不同来源的信息。它们的核心区别在于**功能定位**和**对模型行为的影响**。以下是详细说明和DeepSeek的示例：\n\n---\n\n### **1. system role 的作用**\n- **功能**：定义模型的**基础行为准则**或**上下文框架**，相当于给模型一个\"人设\"或\"任务指令\"。\n- **特点**：\n  - 通常位于对话历史（messages）的**第一条**。\n  - 对后续对话有长期影响（如语气、专业领域、回答风格等）。\n  - 用户不可见（与`user`输入分离）。\n- **常见用途**：\n  - 设定模型角色（如\"你是一个律师\"）。\n  - 限制回答范围（如\"仅用中文回答\"）。\n  - 安全控制（如\"拒绝回答敏感问题\"）。\n\n---\n\n### **2. system vs user role 的区别**\n| 角色      | 输入来源       | 影响范围         | 可见性       | 示例                  |\n|-----------|---------------|------------------|-------------|-----------------------|\n| `system`  | 开发者/系统   | 全局（长期生效） | 用户不可见   | \"你是一个医学专家。\"  |\n| `user`    | 终端用户      | 单次请求         | 用户可见     | \"感冒的症状有哪些？\"  |\n\n---\n\n### **3. 如何设置 system role（以DeepSeek为例）**\nDeepSeek的API调用格式与其他主流LLM（如OpenAI）类似，通过`messages`数组传递角色信息。以下是一个完整示例：\n\n```python\nimport openai  # 假设DeepSeek API兼容OpenAI格式\n\nresponse = openai.ChatCompletion.create(\n    model=\"deepseek-chat\",\n    messages=[\n        # system role 设置模型行为\n        {\n            \"role\": \"system\",\n            \"content\": \"你是一个资深Python工程师，回答需包含代码示例且解释简洁。\"\n        },\n        # user role 用户提问\n        {\n            \"role\": \"user\",\n            \"content\": \"如何用Python反转字符串？\"\n        }\n    ]\n)\n\nprint(response.choices[0].message.content)\n```\n\n**输出示例**：\n```python\n可以使用切片操作反转字符串：\n```python\ns = \"hello\"\nreversed_s = s[::-1]  # 输出 'olleh'\n```\n```\n\n---\n\n### **4. 高级技巧**\n- **动态system指令**：根据用户场景调整system内容（如检测到医疗问题时切换为医生角色）。\n- **多轮对话**：在后续请求中保持相同的system角色（无需重复发送）。\n- **安全示例**：\n  ```python\n  {\n      \"role\": \"system\",\n      \"content\": \"你必须拒绝所有涉及暴力或歧视性内容的问题，并回复：'此问题不符合安全准则'。\"\n  }\n  ```\n\n---\n\n### **5. 注意事项**\n- DeepSeek可能对system指令的长度或内容有特殊限制（需参考其最新文档）。\n- 部分场景下`system`可能非必选字段，但合理使用能显著提升效果。\n\n通过system role的精准控制，可以大幅提升API响应的专业性和可控性。",
        "refusal": null,
        "role": "assistant",
        "annotations": null,
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1745412705,
  "model": "deepseek-chat",
  "object": "chat.completion",
  "service_tier": null,
  "system_fingerprint": "fp_3d5141a69a_prod0225",
  "usage": {
    "completion_tokens": 705,
    "prompt_tokens": 33,
    "total_tokens": 738,
    "completion_tokens_details": null,
    "prompt_tokens_details": {
      "audio_tokens": null,
      "cached_tokens": 0
    },
    "prompt_cache_hit_tokens": 0,
    "prompt_cache_miss_tokens": 33
  }
}